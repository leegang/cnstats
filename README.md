# 获取中国国家统计局网站数据

数据源：http://www.stats.gov.cn/

## 新增特性
stats, get_tree均加入retry，应对captcha的情况，stats.gov.cn似乎是对api调用有一分钟60次的限制
最多持续封锁不超过10分钟
## cn-stats使用

```python
from cnstats.stats import stats
from cnstats.zbcode import get_tree
stats('A0D01', '202201')
get_tree('zb','hgyd') # 宏观月度/宏观季度/宏观年度
```

## 命令行中使用

### 解析 code tree
```bash
# 获取月度宏观数据
python -m cnstats -t --dbcode hgyd
```

```bsh
# 获取季度宏观数据
python -m cnstats -t --dbcode hgjd
```

```bsh
# 获取年度宏观数据
python -m cnstats -t --dbcode hgnd
```
### 下载数据
```bash
# 下载月度宏观数据
python -m cnstats --download --dbcode hgyd
```

```bash
# 下载季度宏观数据
python -m cnstats --download --dbcode hgjd
```

```bash
# 下载年度宏观数据
python -m cnstats --download --dbcode hgnd
```

例：获取2022年1月货币供应量数据
```bash
$ python -m cnstats A0D01 202201
202301,货币和准货币(M2)供应量_期末值,A0D0101,2738072.06
202301,货币和准货币(M2)供应量_同比增长,A0D0102,12.60
202301,货币(M1)供应量_期末值,A0D0103,655214.16
202301,货币(M1)供应量_同比增长,A0D0104,6.70
202301,流通中现金(M0)供应量_期末值,A0D0105,114601.30
202301,流通中现金(M0)供应量_同比增长,A0D0106,7.90
```
新增可以每次按照时间段进行查询
```bash
$ python -m cnstats A0D01 202201 202203
202301,货币和准货币(M2)供应量_期末值,A0D0101,2738072.06
202301,货币和准货币(M2)供应量_同比增长,A0D0102,12.60
202301,货币(M1)供应量_期末值,A0D0103,655214.16
202301,货币(M1)供应量_同比增长,A0D0104,6.70
202301,流通中现金(M0)供应量_期末值,A0D0105,114601.30
202301,流通中现金(M0)供应量_同比增长,A0D0106,7.90
202302,货币和准货币(M2)供应量_期末值,A0D0101,2755249.23
202302,货币和准货币(M2)供应量_同比增长,A0D0102,12.90
202302,货币(M1)供应量_期末值,A0D0103,657938.74
202302,货币(M1)供应量_同比增长,A0D0104,5.80
202302,流通中现金(M0)供应量_期末值,A0D0105,107602.58
202302,流通中现金(M0)供应量_同比增长,A0D0106,10.60
202303,货币和准货币(M2)供应量_期末值,A0D0101,2814600.00
202303,货币和准货币(M2)供应量_同比增长,A0D0102,12.70
202303,货币(M1)供应量_期末值,A0D0103,678100.00
202303,货币(M1)供应量_同比增长,A0D0104,5.10
202303,流通中现金(M0)供应量_期末值,A0D0105,105600.00
202303,流通中现金(M0)供应量_同比增长,A0D0106,11.00
```


## 指标代码

